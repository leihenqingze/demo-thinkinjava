# 6.5 总结
无论是在什么样的关系之中，设立一些为各成员所遵守的界限始终是很重要的。当创建了一个类库，也就与该类库的用户建立了某种关系，这些用户就是客户端程序员，他们是另外一些程序员，他们将你的类库聚合成为一个应用程序，或是运用你的类库来创建一个更大的类库。 

如果不制定规则，客户端程序员就可以对类的所有成员随心而为，即使你可能并不希望他们直接复制其中的一些成员。在这种情况下，所有事物都是公开的。

本章讨论了类是如何被构建成类库的：首先，介绍了一组类是如何被打包到一个类库中的；其次，类是如何控制对其成员的访问的。

据估计，用C语言开发项目，在50千行至100千行代码之间就会出现问题。这是因为C语言仅有单一的“名字空间”，并且名称开始发生冲突，引发额外的管理开销。而对于java，关键字package、包的命名模式和关键字import，可以使你对名称进行完全的控制，因此名称冲突的问题是很容易避免的。

控制对成员的访问权限有两个原因。第一是**为了使用户不要碰触那些他们不该碰触的部分，这些部分对于类内部的操作是必要的，但是它并不属于客户端程序员所需接口的一部分。因此，将方法和域指定成private，对客户端程序员而言是一种服务。因为这样他们可以很清楚地看到什么对他们重要，什么是他们可以忽略的。这样简化了他们对类的理解**。

第二个原因，也是最重要的原因，**是为了让类库设计者可以更改类的内部工作方式，而不必担心这样会对客户端程序员产生重大的影响**。例如，最初可能会以某种方式创建一个类，然后发现如果更改程序结构，可以大大提高运行速度。如果接口和实现可以被明确地隔离和加以保护，那么就可以实现这一目的，而不必强制客户端程序员重新编写代码。访问权限控制可以确保不会有任何客户端程序员依赖于某个类的底层实现的任何部分。

** 当具备了改变底层实施细节的能力时，不仅可以随意地改善设计，还可能会随意地犯错误，同时也就有了犯错的可能性。无论如何细心地计划并设计，都有可能犯错。当了解到你所犯错误是相对安全的时候，就可以更加放心地进行实验，也就可以更快地学会，更快地完成项目**。

类的公共接口是用户真正能够看到的，所以这一部分是在分析和设计的过程中决定该类是否正确的最重要的部分。尽管如此，你仍然有进行改变的空间。如果在最初无法创建出正确的接口，那么只要不删除任何客户端程序员在他们的程序中已经用到的东西，就可以在以后添加更多的方法。

注意，访问权限控制专注于类库创建者和该类库的外部使用者之间的关系，这种关系也是一种通信方式。然而，在许多情况下事情并非如此。例如，你自己编写了所有的代码，或者你在一个组员聚集在一起的项目组中工作，所有的东西都放在同一个包中。这些情况是另外一种不同的通信方式，**因此严格地遵循访问权限规则并不一定是最佳选择，默认（包）访问权限也许只是可行而已**。